<!DOCTYPE html>
<html lang="ru">
    <head>
        <link rel="stylesheet" type="text/css" href="super.css"/> <!-- подключаем css -->
        <meta charset = "utf8" />
        <script type="text/javascript" src="jquery-3.5.1.js"></script> <!-- подключаем jquery -->
        <title>ЛР №5-8</title>
    </head>
    <body>
        <!--Регистрация-->
		<form class="decor" method="post" action="main.php" id="registration">
			<div class="form-left-decoration"></div>
			<div class="form-right-decoration"></div>
			<div class="circle"></div>
			<div class="form-inner">
				<h3>Регистрация</h3>
				<input type="text" placeholder="Логин" name="login" id="regLogin" onkeyup="checkParams()" required>
				<input type="email" placeholder="E-mail" name="email" id="regEmail" onkeyup="checkParams()" required>
				<input type="password" placeholder="Пароль" name="password" id="regPassword" onkeyup="checkParams()" required>
				<input type="password" placeholder="Повторите пароль" name="repeatPassword" id="regRepeatPassword" onkeyup="checkParams()" required>
				
				<input type="checkbox" id="chb" onchange="checkParams()"> <!--"document.getElementById('regSubmit').disabled = !this.checked;"-->
				<label for="chb">Согласен на обработку данных</label>
				<script>
					//скрипт для проверки поля на пустоту + нажат ли чекбокс
					function checkParams() 
					{
						//обращение по id элемента
						var login = $('#regLogin').val();//val() - функция для получение значения эл-та login в форме регистрации
						var email = $('#regEmail').val();
						var password = $('#regPassword').val();
						var repeatPassword = $('#regRepeatPassword').val();

						var chbAgreement = document.getElementById('chb');
						var btnRegistration = document.getElementById('regSubmit');
							//document.getElementById('regSubmit').disabled = !document.getElementById('chb').checked;//отключает кнопку регистрации, если чекбокс не отмечен

						if (password == repeatPassword)
						{
							if(login.length != 0 && email.length != 0 && password.length != 0 && repeatPassword.length !=0 &&
							(btnRegistration.disabled = chbAgreement.checked))
							{
								$('#regSubmit').removeAttr('disabled');
							} 
							else 
							{
								$('#regSubmit').attr('disabled', 'disabled');
							}
						}
						else
						{
							$("#regRepeatPassword'").css('border', 'red 1px solid');
							$('regRepeatPassword').html('Пароли не совпадают');
						}


				
						/*$(document).ready(function() 
						{
							$('#repPass').change(function() 
							{
								var pass = $("#pass").val();
								var pass_rep = $("#repPass").val();

								if (pass != pass_rep) 
								{
									$("#repPass").css('border', 'red 1px solid');
									$('#errorBlock').html('Пароли не совпадают');
								}
							});
						});*/
					


						
					}
				</script>
				<input type="submit" value="Зарегистрироваться" id="regSubmit" disabled> 



                <script>
                    //работает для всех инпутов не то что нужно мне
                    /*[].forEach.call(document.querySelectorAll("input"), function(input)
                    {
                        input.oninput = function()
                        {
                            input.value = input.value.replace(/./gm, "★");
                        };
                    });*/
                    
                    //не работает для поля с типом passwd и text
                    /*[].forEach.call(document.getElementById('regPassword'), function(input)
                    {
                        input.oninput = function()
                        {
                            input.value = input.value.replace(/./gm, "★");
                        };
                    });*/
                
                </script>
			</div>
		</form>
    </body>
</html>